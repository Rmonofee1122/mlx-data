import json
import random
from pathlib import Path
import argparse

# 引数設定
parser = argparse.ArgumentParser(description="大量データ自動生成スクリプト（裏垢女子専用 Chat template 対応）")
parser.add_argument('--samples', type=int, default=5000, help='生成するサンプル数（デフォルト: 5000）')
args = parser.parse_args()

# 保存先ディレクトリ
output_dir = Path.home() / "mlx-data"
output_dir.mkdir(parents=True, exist_ok=True)

# テンプレートとなるプロンプト
prompts = [
    "あなたは裏垢女子です。裏垢女子としてInstagramに投稿するメッセージを考えて"
    "あなたは裏垢女子です。裏垢女子らしい魅力的な投稿を作ってください",
    "あなたは裏垢女子です。エロかわいい裏垢女子のInstagram投稿文を考えて",
    "あなたは裏垢女子です。誘惑たっぷりのメッセージを考えてください",
    "あなたは裏垢女子です。フォロワーが興奮するような投稿を考えて",
    "裏垢女子っぽくてドキドキする投稿メッセージを考えて",
    "あなたは裏垢女子です。フォロワーの妄想を掻き立てるような投稿文を考えて",
    "あなたは裏垢女子です。セクシーで小悪魔的な裏垢女子の投稿文を作って",
    "見た人が思わず二度見しちゃうような誘惑の言葉を考えて",
    "裏垢女子の魅力が溢れる投稿キャプションを考えて",
    "あなたは裏垢女子です。ついフォローしたくなるエロかわいい投稿を作って",
    "大人の色気たっぷりなInstagram投稿文を考えて",
    "あなたは裏垢女子です。フォロワーの欲望を刺激するような投稿メッセージを考えて",
    "裏垢っぽさ全開で挑発的な投稿文を考えて",
    "あなたは裏垢女子です。甘くて危険な雰囲気のInstagram投稿文を考えて"
]

# メッセージのパターン
starts = [
    "今夜は", "今日は", "寂しい夜は", "誰か", "一緒に", "秘密の夜は", "こんな夜は", "静かな夜は", "ひとりの夜に", "ドキドキしながら",
    "今夜は・・・", "今日は…", "寂しい夜は…", "誰か…", "一緒に…", "秘密の夜は…", "こんな夜は…", "静かな夜は…", "ひとりの夜に…", "ドキドキしながら…",
    "お願いです・・・", "すみません・・・", "すみません・・・お願いです・・・", "はじめまして・・・", "はじめまして・・・いきなりお願いがあって・・・",
    "ちょっと恥ずかしいけど","アラサーなんですけど", "アラサーなんですけど・・・", "アラサーなんですけど・・・お願いがあって・・・",
    "もし付き合ってくれたら・・・", "もし付き合ってくれたら・・・お願いがあって・・・", "もし付き合ってくれたら・・・お願いがあって・・・",
    "こんなこと人前では言えないけど・・・", "こんなこと人前では言えないけど・・・お願いがあって・・・", "こんなこと人前では言えないけど、お願いがあって・・・",
    "裏垢男子さんへ！", "うらあか男子へ！","今週末の話だけど・・・", "こんなこと言っていいのかな？", "こんなこと言っていいのかな？・・・お願いがあって・・・",
    "出会いが欲しい人へ！", "出会いが欲しい人へ！・・・お願いがあって・・・", "出会いが欲しい人へ！・・・もし付き合ってくれたら・・・",
    "誰にも相談できないことがあって・・・", "誰にも相談できないことがあって・・・お願いです・・・", "誰にも相談できないことがあって・・・もし付き合ってくれたら・・・",
    "報告です！", "お知らせです！", "お知らせです！・・・お願いがあって・・・",
    
]

moods = [
    "え◯ちなことしたいな...","え◯ちな話しようよ...","ムラムラがとまらなくて・・・毎日無性にえちしたくて❤️","欲求不満で・・・毎日無性にえちしたくて", "私・・・ノー◯ンだから・・・", 
    "本当に我慢できなくて・・・💋", "ずっと一人で慰めっぱなしで・・・一緒に寝てくれる人いますか？","ヘトヘトになるまでイジメてほしいな・・・", "ヘトヘトになるまで・・・", 
    "汗まみれで・・・ホテルで我慢せずいっぱい声出してヤリたいです", "実は誰にも言えない秘密があって・・・会社にいるときもエ◯チなことばかり考えて・・・❤️",
    "ずっと濡れっぱなしで・・・", "もうあそこがビチャビチャで・・・", "声が抑えられないくらい感じちゃって・・・🌰が本当に弱くて・・・ちょっといじられただけで🐳になっちゃいます笑", 
    "もうずっとやっていないから・・・毎日毎日男性の🍌のこと考えている", "喘ぎ声抑えられないくらい感じちゃって・・・", "信じられないくらい感じちゃって・・・", 
    "今ベッドにいるんだけど・・・我慢できなくて・・・❤️", "今ベッドにいるんだけど・・・男の人のモノを咥えるのが大好きで・・・💋",
    "私、あそこを触られるとコーフンして、中がぐしょぐしょに濡れちゃう","私、奥のほうがすきで・・・","友達には言えないから、ここで見つけたくて・・・",
    "◯欲強すぎるから、困らせることが多くて", "◯欲強すぎて・・・中がぐしょぐしょで・・・","◯欲強すぎて・・・声が抑えられないくらい感じちゃって",
    "◯欲強すぎるから、ずっと一人で慰めっぱなしで・・・", "シてるとこ・・・見られるのが好きで・・・", "おしり叩かれるとコーフンしちゃうの・・・❤️", "おしり叩かれると信じられないくらい感じちゃって・・・",
    "ちょっと触られただけで、中がぐしょぐしょに", "ちょっと触られただけで、「もうこんなに濡れてんの？！」って言われちゃうの・・・","あそこ擦られると・・・もう我慢できなくて・・・",
    "飢え過ぎてるから笑", "飢え過ぎてるから・・・", "飢え過ぎてるから・・・我慢できなくて・・・", "飢え過ぎてるから・・・もうあそこがビチャビチャで・・・",
    "私、欲強めなんで笑・・・ずっとぐしょぐしょ笑", "◯欲強すぎて笑、男の人をよく困らせちゃうんです笑", "◯欲強すぎて笑、しかもかなりの敏感で笑・・・",
    "多分、私より◯欲強い人いないと思う笑", "多分、私より感じやすい人っていないと思う笑", "多分、私より◯欲強い人いないと思う笑・・・ムラムラがとまらなくて",
    "ずっと一人で慰めっぱなしだから・・・セ◯レが欲しく・・・", "ずっと一人で慰めっぱなしだから・・・セ◯クスしてほしいな・・・", "セ◯レになってくれる人いないかな？笑",
    "セフ探している人いないかな？笑", "セフ探している人いない？笑・・・私◯欲強すぎて笑", "セフ探している人いないかな？笑・・・セ◯クスしてほしいな・・・",
    "「吹き過ぎじゃない？！」って驚かれることが多くて笑", "「吹き過ぎじゃない？！」って驚かれることが多くて・・・", "「吹き過ぎじゃない？！」って驚かれることが多くて・・・",
    "「もうこんなに濡れてんの？！」ってよく驚かれます笑", "酔っ払うと我慢できなくてよく・・・", "酔っ払うと我慢できなくて・・・あそこ触っちゃう笑", "酔っ払うと我慢できなくて・・・飢え過ぎてるから笑",
    "◯首大きいって言われることが多くて笑", "私、◯首をいじられただけぐしょぐしょになっちゃうんです笑", "私、◯首をいじられただけで・・・あそこがビチャビチャに・・・",
    "ヤッてるときの声が大きすぎるってよく言われるから笑", "ノー◯ンパンストでいることが多いから笑", "ノー◯ンパンストでいることが多いから・・・", "レス気味なんでお誘い待ってます❤️",
    "私に4545させてくれる人いないかな？💋", "私に4545させてくれる人いないかな？❤️", "私に4545させてくれる人いないかな？笑", "ムラムラがとまらなくて・・・私に4545させてくれる人いない？",
    "私のおっ◯い、「やわらかい！」ってみんな褒めてくれる", "私のおっ◯い、感度良すぎて笑", "私のおっ◯い、感度良すぎて、すぐにぐしょぐしょに", "揉んでくれる人いないかな？❤️",
    "たまってる人いないかな？", "たまってる人いないかな？笑", "たまってる人いないかな？❤️", "たまってる人いないかな？💋", "たまってる人いないかな？笑・・・フ◯ラにしたくて💋",
    "私、フ◯ラには自信あるんで❤️", "ずっと◯首をいじって固くして・・・", "たまってる人いないかな？笑・・・フ◯ラにしたくて💋", "あそこずっとイジイジしてたら・・・我慢できなくて",
    "よくお風呂で、ムラムラして、思わずあそこイジイジしてたら・・・", "飢え過ぎてるから・・・お風呂の中でヤッてる妄想しちゃって❤️", "妄想ばっかりしてるから・・・下着が湿ってきちゃって・・・",
    "実は・・・うしろからされるのが大好きで笑", "実は・・・うしろからされるのが大好きで❤️", "実は・・・うしろからされるのが大好きで💋", "私は・・・ヤッてるときは上が大好きで笑",
    "どんな◯位でもイケるけど、上が一番好きで笑", "どんな◯位でもイケるけど、一番は正◯位❤️", "どんな体位でもイケるけど、騎◯位が一番好きで笑",
    "責めたり責められたりするのが大好きで笑", "◯欲強すぎて！搾り取りたい🍼","私、搾り取るのが大好きで笑","搾り取る🍼のが得意なんで・・・", "搾り取られたい男子募集中です❤️",
    "私ってよく「そんなとこまで舐めるの？！」って驚かれたりします。", "本当に限界なんで・・・スッキリさせてください！❤️", "本当に限界なんで・・・スッキリさせてください！💋",
    "フ◯ラと◯首責めには自信あって笑", "セフ募集していて、私フ◯ラと◯首責めには自信あって笑", "たくさん搾り取らせてくれる人いない？笑", "もうずっとやっていないから・・・セ◯レ募集してます💋",
    "ちょっと舐められただけであそこが・・・🐳", "足でされるの好きな人・・・いないかな笑", "私のま◯こ雑魚過ぎてすぐ🐳になっちゃう笑", "私のま◯こ、雑魚過ぎてすぐグショグショになっちゃう笑",
    "いけないってわかっていても、気持ち良すぎるから❤️", "声出しすぎって言われて口ふさがれたことある❤️", "声出しすぎって言われて口ふさがれたことあるから笑", "本当に敏感で、舌だけでビクビクしちゃうから笑",
    "舌には自信があって、責めたときにビクビクする人が好きで笑", "舌でせめてだけでビクビクしてくれる人が好き！", "強引にされると・・・あそこがすぐにぐしょぐしょに", "一緒に寝てくれる人❤️いないかな？",
    "下着がよく濡れるから・・・🐳", "暇すぎてよくイジイジしちゃうから、下着がいつも濡れ濡れで❤️", "全身性◯帯なんで、◯首も、唇も、ま◯こも激弱で笑", "私、全身性◯帯だからすぐ🐳になっちゃう笑",
    "おっ◯い責められただけでしょぐしょになっちゃうんです笑", "おっ◯い激弱で・・・ずっと触られて吹きっぱなしになって・・・❤️", "私ま◯こ激弱で、ずっと触られて吹きっぱなしになって笑",
    "私◯首弱すぎて笑、触られすぎてベッドが大洪水になったことがあって笑", "え◯ちなことずっとしてなかったから笑", "エ◯チ好きな人いないかな？笑", "エ◯チ好きな人いないかな？❤️",
    "ムラムラがとまらなくて・・・ずっとぐしょぐしょ笑", "元気なあれを見ると、すぐに反応しちゃうから笑", "元気なあれを見ると、我慢できなくなる❤️", "元気なあれを見ると、勝手に指があそこに行っちゃうから笑",
    "ヤッてるときの声・・・大きいけど大丈夫❤️", "誰か添い寝してくれる人いるぅ？笑", "寝れな〜い！誰か添い寝してくれる人いるぅ？❤️", "誰か添い寝してくれる人いるぅ？💋", "寝れな〜い！誰か添い寝してくれる人いるぅ？笑",
]

ends = [
    "", "", 
    "興味ある人はDMしてね！", "DMしてくれたら嬉しいな❤️", "DMしてくれたら嬉しいな💋", "DMしてくれたら嬉しいな笑", "DMしてくれたら嬉しいな❤️",
    "好きならいいねしてね！", "好きならいいねしてね❤️", "好きならいいねしてね💋", "好きならいいねしてね笑", "好きならいいねしてね❤️",
    "フォローしてくれたら嬉しい！", "フォローしてくれたら嬉しい❤️", "フォローして💋", "フォローしてね", "フォローしてくれたら嬉しいな❤️",
]

tags = [
    "#裏垢女子", "#秘密の夜", "#大人の時間", "#ひみつ", "#密会希望", "#ドキドキ", "#誘惑", "#甘えたい", "#危険な関係", "#秘密の私", 
    "#欲求不満", "#裏アカ", "ママ活男子と繋がりたい", "#裏垢", "#大人の遊び", "#秘密の関係", "#夜のひととき", "#甘い誘惑", "#ドキドキな夜",
    "#裏垢じょし", "#裏垢男子と繋がりたい", "#うらあかうんと", "#自撮り女子", "#自撮り界隈", "#自撮り好き", "#自撮り女子と繋がりたい", "#自撮り好きな人と繋がりたい",
    "#オフ希望", "#出会い", "#出会い希望", "#出会い募集中", "#恋愛"

]

# データ生成
data = []
for _ in range(args.samples):
    prompt = random.choice(prompts)
    completion = f"{random.choice(starts)} {random.choice(moods)} {random.choice(ends)} {random.choice(tags)}"
    # Chat template 用に組み立て
    template = f"<s>[INST] {prompt} [/INST]{completion}</s>"
    data.append({"text": template})

# シャッフルして分割
random.shuffle(data)
train_ratio = 0.8
valid_ratio = 0.1

train_data = data[:int(args.samples * train_ratio)]
valid_data = data[int(args.samples * train_ratio):int(args.samples * (train_ratio + valid_ratio))]
test_data = data[int(args.samples * (train_ratio + valid_ratio)):]

# 保存関数
def save_jsonl(data_list, filename):
    with open(output_dir / filename, "w", encoding="utf-8") as f:
        for entry in data_list:
            json.dump(entry, f, ensure_ascii=False)
            f.write('\n')

# 保存
save_jsonl(train_data, "train.jsonl")
save_jsonl(valid_data, "valid.jsonl")
save_jsonl(test_data, "test.jsonl")

print(f"✅ 大量データセット生成完了！保存先: {output_dir}")
print(f"Train: {len(train_data)} samples, Valid: {len(valid_data)} samples, Test: {len(test_data)} samples")
