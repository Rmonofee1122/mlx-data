import json
import random
from pathlib import Path
import argparse

# 引数設定
parser = argparse.ArgumentParser(description="大量データ自動生成スクリプト（裏垢女子専用 Chat template 対応）")
parser.add_argument('--samples', type=int, default=5000, help='生成するサンプル数（デフォルト: 5000）')
args = parser.parse_args()

# 保存先ディレクトリ
output_dir = Path.home() / "mlx-data"
output_dir.mkdir(parents=True, exist_ok=True)

# テンプレートとなるプロンプト
prompts = [
    "美熟女としてInstagramに投稿するメッセージを考えて",
    "美熟女らしい魅力的な投稿を作ってください",
    "エロかわいい美熟女のInstagram投稿文を考えて",
    "あなたは美熟女です。誘惑たっぷりのメッセージを考えてください",
    "あなたは美熟女です。フォロワーが興奮するような投稿を考えて",
    "美熟女っぽくてドキドキする投稿メッセージを考えて",
    "あなたは美熟女です。フォロワーの妄想を掻き立てるような投稿文を考えて",
    "セクシーで小悪魔的な裏垢女子の投稿文を作って",
    "あなたは美熟女です。見た人が思わず二度見しちゃうような誘惑の言葉を考えて",
    "美熟女の魅力が溢れる投稿キャプションを考えて",
    "あなたは美熟女です。ついフォローしたくなるエロかわいい投稿を作って",
    "大人の色気たっぷりなInstagram投稿文を考えて",
    "あなたは美熟女です。フォロワーの欲望を刺激するような投稿メッセージを考えて",
    "美熟女っぽさ全開で挑発的な投稿文を考えて",
    "あなたは美熟女です。甘くて危険な雰囲気のInstagram投稿文を考えて",
    "熟女としてInstagramに投稿するメッセージを考えて",
    "熟女らしい魅力的な投稿を作ってください",
    "エロかわいい熟女のInstagram投稿文を考えて",
    "あなたは熟女です。誘惑たっぷりのメッセージを考えてください",
    "あなたは熟女です。フォロワーが興奮するような投稿を考えて",
    "熟女っぽくてドキドキする投稿メッセージを考えて",
    "あなたは熟女です。フォロワーの妄想を掻き立てるような投稿文を考えて",
    "セクシーで小悪魔的な裏垢女子の投稿文を作って",
    "あなたは熟女です。見た人が思わず二度見しちゃうような誘惑の言葉を考えて",
    "熟女の魅力が溢れる投稿キャプションを考えて",
    "あなたは熟女です。ついフォローしたくなるエロかわいい投稿を作って",
    "大人の色気たっぷりなInstagram投稿文を考えて",
    "あなたは熟女です。フォロワーの欲望を刺激するような投稿メッセージを考えて",
    "熟女っぽさ全開で挑発的な投稿文を考えて",
    "あなたは熟女です。甘くて危険な雰囲気のInstagram投稿文を考えて"
]

# メッセージのパターン
starts = [
    "熟女からお願いがあります！",
    "昭和生まれのおじ様いますか？❤️",
    "やさしい男性どこかにいませんか？",
    "アラフィフでまだ欲があるなんて・・・",
    "私、アラフォーなんですが・・・",
    "旦那と別れて毎日ヒマです涙",
    "私、40超えているおばさんなんですが・・・❤️",
    "私、アラフォーのバツイチですが・・・",
    "私、アラフィフのバツイチですが・・・❤️",
    "アラフォーのおばさんでよければ・・・❤️",
    "アラフィフのおばさんでよければ・・・",
    "アラフォーなんでどう思われるか心配ですが・・・",
    "アラフィフなんでどう思われるか心配ですが・・・",
    "アラフォーにもなって恥ずかしいんですが・・・",
    "アラフィフにもなって恥ずかしいんですが・・・",
    "アラフォーになってから何故か◯欲が強くなって・・・",
    "アラフィフになってから何故か◯欲が強くなって・・・",
    "年齢を重ねるごとに◯欲が強くなって・・・",
    "アラフォーなのにお相手が欲しくて・・・",
    "アラフィフなのにお相手が欲しくて・・・"
]

moods = [
    "ホテルで我慢せずいっぱい声出してヤリたいです・・・",
    "毎日毎日男性の🍌のこと考えている・・・はしたない私です・・・",
    "毎日無性にえちしたくて・・・濡らしっぱなしで困ってて・・・",
    "男性の🍌を咥えるのが大好き❤️",
    "男の人のモノを咥えるのが大好きで・・・💋",
    "ずっとヤッていたいのに・・・なぜか私より先に果てる男性が多くて・・・",
    "一度でいいから絶頂するまで、淫らに腰を振っていたいです❤️",
    "前の旦那が知らなかった本当の私・・・興味ないですか？",
    "インスタとスレッズで男漁っている・・・はしたない私ですが・・・遊んでいただけませんか？",
    "いつもの男性の🍌のこと考えている・・こんな下品なおばさんで申し訳ないです・・・",
    "40～60くらいの包容力のある男性、いませんか？",
    "え◯ちなおじさまに出会いたいとずっと思っていて・・・",
    "元旦那の🍌しか知らないので、色々教えてほしいです・・・",
    "一人の時間には慣れたのに・・・やっぱり誰かのぬくもりがほしいです・・・",
    "内緒で会ってくれるえ◯ちな男性、いないですか？",
    "この年にもなってムラムラがとまらなくて・・・下着がよく濡れるから・・・🐳",
    "ホテルに入って好き放題やりたいです❤️",
    "元主人の🍌しか知らない私に、色々教えてほしいです・・・",
    "欲求不満で昨日おもちゃを買ってしまって・・・どんな形かは想像におまかせします笑",
    "離婚してから◯欲が強くなって・・・一緒に寝てくれる人いますか？",
    "旦那と別れてから余計にムラムラがとまらなくて",
    "男性の🍌から搾り取る🍼のが大好きで笑",
    "主人と別れてからずっといろいろ溜まっていて・・・お相手してくれる方いませんか？",
    "何年もレス状態が続いているから・・・たくさん搾り取らせてくれる人いないですか？笑",
    "どんな体位でもイケるけど、騎◯位が一番好きです笑",
    "勃◯した私の🌰を舐めてくれる方・・・いないですか？",
    "新しい下着を買ったのに・・・見せる人がいないので・・・",
    "この年齢になると出会いが全く無くて・・・どなたかお相手してくれる方いませんか？",
    "土日も仕事だからずっと溜まっていて・・・お相手してくれる方いませんか❤️",
    "私の💋興味ある方います？音が激しいってよく言われます笑",
    "仕事だけの女なのでもう何年もしてなくて・・・日々悶々としています",
    "元旦那としか経験がないこと焦りを感じていて・・・もっといろんな男性と経験したい❤️",
    "ずっと◯首をいじって固くして・・・毎日無性にえちしたくて・・・",
    "いつもセ◯クスのことばかり考えてしまう・・・はしたないおばさんです・・・",
    "恥ずかしい話、元主人との経験しかくて、嫌になってしまいます。",
    "私、フ◯ラには自信あるんで笑",
    "一人であそこずっとイジイジしてるから・・・ベッドが大洪水になったことがあって笑",
    "絶頂しているのに終わらないでずっと腰を振り続けられる・・・そんな強引なえ◯ちが好きかも笑",
    "この年齢になると出会いが全く無くて寂しい・・・どなたかいませんか？",
    "本当に限界なんで・・・スッキリさせてください！❤️",
    "ヤッてるときの声・・・大きいけど、それでも気にしないおじ様いますか？",
    "◯欲強すぎて！ずっと疼いてて・・・搾り取りたいです🍼",
    "私🌰が本当に弱くて・・・ちょっといじられただけで🐳になっちゃいます笑",
    "実は・・・うしろから激しくされるのが大好きで❤️",
    "会社にいるときもエ◯チなことばかり考えてしまうんです・・・❤️",
    "働いているときも🍌のことを妄想する・・・はしたない私ですが・・・興味ないですか？",
    "足でされるの好きなおじさま・・・いないですか笑",
    "心も身体も寂しくて・・・いつも誰かに甘えたい気分です❤️",
    "ずっとデスクワークで全身凝っていて・・・誰かマッサージしてくれません笑",
    "お仕事終わりに・・・おうちでお酒飲んで、酔っ払うと我慢できなくてよく・・・ひとりで❤️",
    "夜活するとき電気は消す派ですか？わたしは恥ずかしがり屋なので適度に暗くしたい派です",
    "おっ◯い激弱で・・・ずっと触られてシーツをびしょびしょにしてしまったことがあります笑",
    "◯首も敏感なのですが・・・一番弱いのは🌰で・・・すぐにグショグショになってしまいます"
]

ends = [
    "", "", 
    "おばさんでもいい方だけお願いします❤️",
    "おばさんでもいい方だけお願いします",
    "おばさんでもいい方だけお願いします！",
    "フォローしてくれたら嬉しいです❤️",
    "いいねくれた方からお誘いさせていただきます💋",
    "引かない方だけ❤️やDM待ってます！",
    "こんな私でよければ・・・",
    "こんな私でよければ・・・❤️",
    "こんな私でよければフォローお待ちしております",
    "欲張りでごめんなさい笑",
    "お待ちしてますね・・・❤️",
    "出会えるかドキドキです❤️",
    "よろしくお願いします！",
    "よろしくお願いします💋",
    "おばさんでも大丈夫な方だけお願いします💋",
    "おばさんでも大丈夫な方だけお願いします❤️",
    "DMお待ちしています！できれば年上希望です！",
    "既婚者でも密会してくださるなら嬉しいです",
    "もうずっと一人でしているから・・・どなたか・・・",
    "若い人も好きですがおばさんなんで・・・体力的に心配です・・・"
]

tags = [
    "#熟女",
    "#美魔女",
    "#美熟女",
    "#アラフォー",
    "#アラフィフ",
    "#欲求不満",
    "#奥さん",
    "#おばさん",
    "#人妻",
    "#ママ活女子",
    "#出会い",
    "#密会希望",
    "#出会いがほしい",
    "#未亡人",
    "#熟女モデル",
    "#熟女モデル",
    "#彼氏募集中"
]

# データ生成
data = []
for _ in range(args.samples):
    prompt = random.choice(prompts)
    completion = f"{random.choice(starts)} {random.choice(moods)} {random.choice(ends)} {random.choice(tags)}"
    # Chat template 用に組み立て
    template = f"<s>[INST] {prompt} [/INST]{completion}</s>"
    data.append({"text": template})

# シャッフルして分割
random.shuffle(data)
train_ratio = 0.8
valid_ratio = 0.1

train_data = data[:int(args.samples * train_ratio)]
valid_data = data[int(args.samples * train_ratio):int(args.samples * (train_ratio + valid_ratio))]
test_data = data[int(args.samples * (train_ratio + valid_ratio)):]

# 保存関数
def save_jsonl(data_list, filename):
    with open(output_dir / filename, "w", encoding="utf-8") as f:
        for entry in data_list:
            json.dump(entry, f, ensure_ascii=False)
            f.write('\n')

# 保存
save_jsonl(train_data, "train.jsonl")
save_jsonl(valid_data, "valid.jsonl")
save_jsonl(test_data, "test.jsonl")

print(f"✅ 大量データセット生成完了！保存先: {output_dir}")
print(f"Train: {len(train_data)} samples, Valid: {len(valid_data)} samples, Test: {len(test_data)} samples")
